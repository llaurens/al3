!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.LazyLoad=e()}(this,function(){function t(t,e,n){function o(){return window.innerWidth||d.documentElement.clientWidth||document.body.clientWidth}function i(){return window.innerHeight||d.documentElement.clientHeight||document.body.clientHeight}function r(t){return t.getBoundingClientRect().top+f-d.documentElement.clientTop}function l(t){return t.getBoundingClientRect().left+h-d.documentElement.clientLeft}function s(){var o;return o=e===window?i()+f:r(e)+e.offsetHeight,o<=r(t)-n}function a(){var i;return i=e===window?o()+window.pageXOffset:l(e)+o(),i<=l(t)-n}function c(){var o;return o=e===window?f:r(e),o>=r(t)+n+t.offsetHeight}function u(){var o;return o=e===window?h:l(e),o>=l(t)+n+t.offsetWidth}var d,f,h;return d=t.ownerDocument,f=window.pageYOffset||d.body.scrollTop,h=window.pageXOffset||d.body.scrollLeft,!(s()||c()||a()||u())}function e(){return(new Date).getTime()}function n(t,e){var n,o={};for(n in t)t.hasOwnProperty(n)&&(o[n]=t[n]);for(n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);return o}function o(t){return Array.prototype.slice.call(t)}function i(t,e){var n=t.parentElement;if("PICTURE"===n.tagName)for(var o=0;o<n.children.length;o++){var i=n.children[o];if("SOURCE"===i.tagName){var r=i.getAttribute("data-"+e);r&&i.setAttribute("srcset",r)}}}function r(t,e,n){var o=t.tagName,r=t.getAttribute("data-"+n);if("IMG"===o){i(t,e);var l=t.getAttribute("data-"+e);return l&&t.setAttribute("srcset",l),void(r&&t.setAttribute("src",r))}if("IFRAME"===o)return void(r&&t.setAttribute("src",r));r&&(t.style.backgroundImage="url("+r+")")}function l(t,e){return function(){return t.apply(e,arguments)}}function s(t){this._settings=n(a,t),this._queryOriginNode=this._settings.container===window?document:this._settings.container,this._previousLoopTime=0,this._loopTimeout=null,this._handleScrollFn=l(this.handleScroll,this),window.addEventListener("resize",this._handleScrollFn),this.update()}var a={elements_selector:"img",container:window,threshold:300,throttle:150,data_src:"original",data_srcset:"original-set",class_loading:"loading",class_loaded:"loaded",skip_invisible:!0,callback_load:null,callback_error:null,callback_set:null,callback_processed:null};return s.prototype._showOnAppear=function(t){function e(){t.removeEventListener("load",n),t.classList.remove(o.class_loading),o.callback_error&&o.callback_error(t)}function n(){null!==o&&(o.callback_load&&o.callback_load(t),t.classList.remove(o.class_loading),t.classList.add(o.class_loaded),t.removeEventListener("load",n),t.removeEventListener("error",e))}var o=this._settings;"IMG"!==t.tagName&&"IFRAME"!==t.tagName||(t.addEventListener("load",n),t.addEventListener("error",e),t.classList.add(o.class_loading)),r(t,o.data_srcset,o.data_src),o.callback_set&&o.callback_set(t)},s.prototype._loopThroughElements=function(){var e,n,o=this._settings,i=this._elements,r=i?i.length:0,l=[];for(e=0;e<r;e++)n=i[e],o.skip_invisible&&null===n.offsetParent||t(n,o.container,o.threshold)&&(this._showOnAppear(n),l.push(e),n.wasProcessed=!0);for(;l.length>0;)i.splice(l.pop(),1),o.callback_processed&&o.callback_processed(i.length);0===r&&this._stopScrollHandler()},s.prototype._purgeElements=function(){var t,e,n=this._elements,o=n.length,i=[];for(t=0;t<o;t++)e=n[t],e.wasProcessed&&i.push(t);for(;i.length>0;)n.splice(i.pop(),1)},s.prototype._startScrollHandler=function(){this._isHandlingScroll||(this._isHandlingScroll=!0,this._settings.container.addEventListener("scroll",this._handleScrollFn))},s.prototype._stopScrollHandler=function(){this._isHandlingScroll&&(this._isHandlingScroll=!1,this._settings.container.removeEventListener("scroll",this._handleScrollFn))},s.prototype.handleScroll=function(){var t,n,o;this._settings&&(n=e(),o=this._settings.throttle,0!==o?(t=o-(n-this._previousLoopTime),t<=0||t>o?(this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._previousLoopTime=n,this._loopThroughElements()):this._loopTimeout||(this._loopTimeout=setTimeout(l(function(){this._previousLoopTime=e(),this._loopTimeout=null,this._loopThroughElements()},this),t))):this._loopThroughElements())},s.prototype.update=function(){this._elements=o(this._queryOriginNode.querySelectorAll(this._settings.elements_selector)),this._purgeElements(),this._loopThroughElements(),this._startScrollHandler()},s.prototype.destroy=function(){window.removeEventListener("resize",this._handleScrollFn),this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._stopScrollHandler(),this._elements=null,this._queryOriginNode=null,this._settings=null},s});
